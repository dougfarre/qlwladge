<h1>Sync Operation</h1>
<b>File Name: </b><i><%= @sync_operation.source_file.to_s %></i>
<br/><br/>
<b>Record Count: </b><i><%= @sync_operation.record_count %><i/>
<br/><br/>
<b>Success Count: </b><i><%= @sync_operation.success_count  %><i/>
<br/><br/>
<b>Reject Count: </b><i><%= @sync_operation.reject_count  %><i/>
<br/><br/>
<b>Rejects URI: </b><i><%= @sync_operation.rejects_uri %><i/>
<br/><br/>

<% if @sync_operation.response.blank? %>
  <h2>Sample of Records to Sync</h2>
  <p style="margin-top:-15px;">A sample of the first few records to be synced </p>
  
  <div style="width:100%; padding:20px; margin-top: -30px;">
    <ul>
      <li><b> <%= @definition.get_headers.join(',') %></b></li>
    </ul>
    <ol>
      <% @sync_operation.sample_records.each do |record|%>
        <li><%= record.to_s %> </li>
      <% end %>
    </ol>
  </div>
<% else %>
  <h2>Response Body</h2>
  <p style="margin-top:-15px;">A sample of the first few records to be synced </p>
  
  <div style="width:60%; padding:20px;">
    <%= @sync_operation.sample_records %>
  </div>
<% end %>

<%= form_for [@definition, @sync_operation] do |f| %>

  <div class="actions">
    <%= f.submit "Sync Data!" %>
  </div>
<% end %>
<% if @sync_operation.reject_count.to_i > 0 %>
<%= link_to 'Download CSV of Rejected Records', edit_definition_sync_operation_path(@definition, @sync_operation) %> |
<br/>
<% end %>




<%= link_to 'Back', definition_path(@definition) %>
