<%= form_for [@service, @definition], :html => {:multipart => true} do |f| %>
  <% if @definition.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@definition.errors.count, "error") %> prohibited this definition from being saved:</h2>

      <ul>
      <% @definition.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div width="500px;">
    <div style="width:210px;display:inline-block;text-align:right;">
      <%= f.label :description, 'Description of definition' %>
    </div>
    <div style="display:inline-block;">
      <%= f.text_field :description, size: "40" %>
    </div>
    <div style="clear:both;"></div>
  </div>

  <br/>
  <h3>REST API Request Parameters</h3>
  <table style="table-layout:fixed; width:100%;">
    <tr>
      <th style="width: 100px; text-align:right; padding-right:25px;">Name</th>
      <th>Description</th>
      <th style="width:100px; text-align:left;">Required?</th>
      <th style="text-align:left;">Value</th>
    </tr>
    <% @definition.request_parameters.each do |param| %>
      <% param_tag = 'request_parameters[' + param.name + ']' %>
      <tr>
        <td style="text-align: right; padding-right:25px;"><%= param.name %></td>
        <td style="word-wrap:break-word; text-align:center;"><%= param.description %></td>
        <td><%= param.optional.to_s %></td>
        <td><%= text_field_tag param_tag %></td>
      </tr>
    <% end %>
  </table>
  <br/>
  <br/>

  <b>CSV Template File (Headers Only!): </b><i><%= f.file_field :source_file %></i>
  <%= f.hidden_field :source_file_cache %>

  <br/>
  <br/>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
